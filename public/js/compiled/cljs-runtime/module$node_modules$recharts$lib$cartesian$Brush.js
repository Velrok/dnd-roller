shadow$provide.module$node_modules$recharts$lib$cartesian$Brush=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj$jscomp$0){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _extends(){_extends=
Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};return _extends.apply(this,arguments)}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];
descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):
call}function _getPrototypeOf(o$jscomp$0){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o$jscomp$0)}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,
superClass)}function _setPrototypeOf(o$jscomp$0,p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p$jscomp$0)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _range2=_interopRequireDefault(require("module$node_modules$lodash$range")),_isFunction2=
_interopRequireDefault(require("module$node_modules$lodash$isFunction")),_react=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;return newObj}(require("module$node_modules$react$index"));global=_interopRequireDefault(require("module$node_modules$prop_types$index"));
var _classnames=_interopRequireDefault(require("module$node_modules$classnames$index")),_d3Scale=require("module$node_modules$d3_scale$dist$d3_scale"),_ChartUtils=require("module$node_modules$recharts$lib$util$ChartUtils");module=_interopRequireDefault(require("module$node_modules$recharts$lib$util$PureRender"));var _Layer=_interopRequireDefault(require("module$node_modules$recharts$lib$container$Layer")),_Text=_interopRequireDefault(require("module$node_modules$recharts$lib$component$Text")),_DataUtils=
require("module$node_modules$recharts$lib$util$DataUtils"),_CssPrefixUtils=require("module$node_modules$recharts$lib$util$CssPrefixUtils"),_class,_class2,_temp;require=(0,module.default)(_class=(_temp=_class2=function(_Component){function Brush(props){if(!(this instanceof Brush))throw new TypeError("Cannot call a class as a function");var _this=_possibleConstructorReturn(this,_getPrototypeOf(Brush).call(this,props));_this.handleDrag=function(e){_this.leaveTimer&&(clearTimeout(_this.leaveTimer),_this.leaveTimer=
null);_this.state.isTravellerMoving?_this.handleTravellerMove(e):_this.state.isSlideMoving&&_this.handleSlideDrag(e)};_this.handleTouchMove=function(e){null!=e.changedTouches&&0<e.changedTouches.length&&_this.handleDrag(e.changedTouches[0])};_this.handleDragEnd=function(){_this.setState({isTravellerMoving:!1,isSlideMoving:!1})};_this.handleLeaveWrapper=function(){if(_this.state.isTravellerMoving||_this.state.isSlideMoving)_this.leaveTimer=setTimeout(_this.handleDragEnd,_this.props.leaveTimeOut)};
_this.handleEnterSlideOrTraveller=function(){_this.setState({isTextActive:!0})};_this.handleLeaveSlideOrTraveller=function(){_this.setState({isTextActive:!1})};_this.handleSlideDragStart=function(e){_this.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX})};_this.travellerDragStartHandlers={startX:_this.handleTravellerDragStart.bind(_assertThisInitialized(_assertThisInitialized(_this)),"startX"),endX:_this.handleTravellerDragStart.bind(_assertThisInitialized(_assertThisInitialized(_this)),
"endX")};_this.state=props.data&&props.data.length?_this.updateScale(props):{};return _this}_inherits(Brush,_Component);_createClass(Brush,[{key:"componentWillReceiveProps",value:function(nextProps){var _this2=this,_this$props=this.props,width=_this$props.width,x=_this$props.x,travellerWidth=_this$props.travellerWidth,updateId=_this$props.updateId;if((nextProps.data!==_this$props.data||nextProps.updateId!==updateId)&&nextProps.data&&nextProps.data.length)this.setState(this.updateScale(nextProps));
else if(nextProps.width!==width||nextProps.x!==x||nextProps.travellerWidth!==travellerWidth)this.scale.range([nextProps.x,nextProps.x+nextProps.width-nextProps.travellerWidth]),this.scaleValues=this.scale.domain().map(function(entry){return _this2.scale(entry)}),this.setState({startX:this.scale(nextProps.startIndex),endX:this.scale(nextProps.endIndex)})}},{key:"componentWillUnmount",value:function(){this.scaleValues=this.scale=null;this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)}},
{key:"getIndex",value:function(_ref){var startX=_ref.startX,endX=_ref.endX,_this$props2=this.props;_ref=_this$props2.gap;_this$props2=_this$props2.data.length-1;var max=Math.max(startX,endX);startX=this.constructor.getIndexInRange(this.scaleValues,Math.min(startX,endX));endX=this.constructor.getIndexInRange(this.scaleValues,max);return{startIndex:startX-startX%_ref,endIndex:endX===_this$props2?_this$props2:endX-endX%_ref}}},{key:"getTextOfTick",value:function(index){var _this$props3=this.props,data=
_this$props3.data,tickFormatter=_this$props3.tickFormatter;_this$props3=_this$props3.dataKey;index=(0,_ChartUtils.getValueByDataKey)(data[index],_this$props3,index);return(0,_isFunction2.default)(tickFormatter)?tickFormatter(index):index}},{key:"handleSlideDrag",value:function(e){var _this$state=this.state,startX=_this$state.startX,endX=_this$state.endX,_this$props4=this.props,x=_this$props4.x,width=_this$props4.width,travellerWidth=_this$props4.travellerWidth,startIndex=_this$props4.startIndex,endIndex=
_this$props4.endIndex;_this$props4=_this$props4.onChange;_this$state=e.pageX-_this$state.slideMoveStartX;0<_this$state?_this$state=Math.min(_this$state,x+width-travellerWidth-endX,x+width-travellerWidth-startX):0>_this$state&&(_this$state=Math.max(_this$state,x-startX,x-endX));x=this.getIndex({startX:startX+_this$state,endX:endX+_this$state});x.startIndex===startIndex&&x.endIndex===endIndex||!_this$props4||_this$props4(x);this.setState({startX:startX+_this$state,endX:endX+_this$state,slideMoveStartX:e.pageX})}},
{key:"handleTravellerDragStart",value:function(id,e){this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:id,brushMoveStartX:(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX})}},{key:"handleTravellerMove",value:function(e){var _this$setState,_this$state2=this.state,movingTravellerId=_this$state2.movingTravellerId,endX=_this$state2.endX,startX=_this$state2.startX,prevValue=this.state[movingTravellerId],_this$props5=this.props,x=_this$props5.x,width=_this$props5.width,
travellerWidth=_this$props5.travellerWidth,onChange=_this$props5.onChange,gap=_this$props5.gap,data=_this$props5.data;_this$props5={startX:this.state.startX,endX:this.state.endX};_this$state2=e.pageX-_this$state2.brushMoveStartX;0<_this$state2?_this$state2=Math.min(_this$state2,x+width-travellerWidth-prevValue):0>_this$state2&&(_this$state2=Math.max(_this$state2,x-prevValue));_this$props5[movingTravellerId]=prevValue+_this$state2;var newIndex=this.getIndex(_this$props5),startIndex=newIndex.startIndex,
endIndex=newIndex.endIndex;this.setState((_this$setState={},_defineProperty(_this$setState,movingTravellerId,prevValue+_this$state2),_defineProperty(_this$setState,"brushMoveStartX",e.pageX),_this$setState),function(){if(onChange){var JSCompiler_inline_result=data.length-1;JSCompiler_inline_result="startX"===movingTravellerId&&(endX>startX?0===startIndex%gap:0===endIndex%gap)||endX<startX&&endIndex===JSCompiler_inline_result||"endX"===movingTravellerId&&(endX>startX?0===endIndex%gap:0===startIndex%
gap)||endX>startX&&endIndex===JSCompiler_inline_result?!0:!1;JSCompiler_inline_result&&onChange(newIndex)}})}},{key:"updateScale",value:function(props){var _this3=this,startIndex=props.startIndex,endIndex=props.endIndex,x=props.x,width=props.width,travellerWidth=props.travellerWidth;props=props.data.length;this.scale=(0,_d3Scale.scalePoint)().domain((0,_range2.default)(0,props)).range([x,x+width-travellerWidth]);this.scaleValues=this.scale.domain().map(function(entry){return _this3.scale(entry)});
return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:this.scale(startIndex),endX:this.scale(endIndex)}}},{key:"renderBackground",value:function(){var _this$props6=this.props;return _react.default.createElement("rect",{stroke:_this$props6.stroke,fill:_this$props6.fill,x:_this$props6.x,y:_this$props6.y,width:_this$props6.width,height:_this$props6.height})}},{key:"renderPanorama",value:function(){var _this$props7=this.props,x=_this$props7.x,y=_this$props7.y,width=_this$props7.width,height=
_this$props7.height,data=_this$props7.data,padding=_this$props7.padding;return(_this$props7=_react.Children.only(_this$props7.children))?_react.default.cloneElement(_this$props7,{x:x,y:y,width:width,height:height,margin:padding,compact:!0,data:data}):null}},{key:"renderTraveller",value:function(travellerX,id){var _this$props8=this.props,y=_this$props8.y,travellerWidth=_this$props8.travellerWidth,height=_this$props8.height,lineY=Math.floor(y+height/2)-1;travellerX=Math.max(travellerX,this.props.x);
return _react.default.createElement(_Layer.default,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[id],onTouchStart:this.travellerDragStartHandlers[id],style:{cursor:"col-resize"}},_react.default.createElement("rect",{x:travellerX,y:y,width:travellerWidth,height:height,fill:_this$props8.stroke,stroke:"none"}),_react.default.createElement("line",{x1:travellerX+1,y1:lineY,x2:travellerX+
travellerWidth-1,y2:lineY,fill:"none",stroke:"#fff"}),_react.default.createElement("line",{x1:travellerX+1,y1:lineY+2,x2:travellerX+travellerWidth-1,y2:lineY+2,fill:"none",stroke:"#fff"}))}},{key:"renderSlide",value:function(startX,endX){var _this$props9=this.props;return _react.default.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,
style:{cursor:"move"},stroke:"none",fill:_this$props9.stroke,fillOpacity:.2,x:Math.min(startX,endX),y:_this$props9.y,width:Math.abs(endX-startX),height:_this$props9.height})}},{key:"renderText",value:function(){var _this$props10=this.props,startIndex=_this$props10.startIndex,endIndex=_this$props10.endIndex,y=_this$props10.y,height=_this$props10.height,travellerWidth=_this$props10.travellerWidth,_this$state3=this.state,startX=_this$state3.startX;_this$state3=_this$state3.endX;_this$props10={pointerEvents:"none",
fill:_this$props10.stroke};return _react.default.createElement(_Layer.default,{className:"recharts-brush-texts"},_react.default.createElement(_Text.default,_extends({textAnchor:"end",verticalAnchor:"middle",x:Math.min(startX,_this$state3)-5,y:y+height/2},_this$props10),this.getTextOfTick(startIndex)),_react.default.createElement(_Text.default,_extends({textAnchor:"start",verticalAnchor:"middle",x:Math.max(startX,_this$state3)+travellerWidth+5,y:y+height/2},_this$props10),this.getTextOfTick(endIndex)))}},
{key:"render",value:function(){var _this$props11=this.props,data=_this$props11.data,className=_this$props11.className,children=_this$props11.children,x=_this$props11.x,y=_this$props11.y,width=_this$props11.width,height=_this$props11.height,_this$state4=this.state;_this$props11=_this$state4.startX;var endX=_this$state4.endX,isTextActive=_this$state4.isTextActive,isSlideMoving=_this$state4.isSlideMoving;_this$state4=_this$state4.isTravellerMoving;if(!(data&&data.length&&(0,_DataUtils.isNumber)(x)&&
(0,_DataUtils.isNumber)(y)&&(0,_DataUtils.isNumber)(width)&&(0,_DataUtils.isNumber)(height))||0>=width||0>=height)return null;data=(0,_classnames.default)("recharts-brush",className);children=1===_react.default.Children.count(children);className=(0,_CssPrefixUtils.generatePrefixStyle)("userSelect","none");return _react.default.createElement(_Layer.default,{className:data,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onTouchMove:this.handleTouchMove,
style:className},this.renderBackground(),children&&this.renderPanorama(),this.renderSlide(_this$props11,endX),this.renderTraveller(_this$props11,"startX"),this.renderTraveller(endX,"endX"),(isTextActive||isSlideMoving||_this$state4)&&this.renderText())}}],[{key:"getIndexInRange",value:function(range,x){for(var start=0,end=range.length-1;1<end-start;){var middle=Math.floor((start+end)/2);range[middle]>x?end=middle:start=middle}return x>=range[end]?end:start}}]);return Brush}(_react.Component),_class2.displayName=
"Brush",_class2.propTypes={className:global.default.string,fill:global.default.string,stroke:global.default.string,x:global.default.number,y:global.default.number,width:global.default.number,height:global.default.number.isRequired,travellerWidth:global.default.number,gap:global.default.number,padding:global.default.shape({top:global.default.number,right:global.default.number,bottom:global.default.number,left:global.default.number}),dataKey:global.default.oneOfType([global.default.string,global.default.number,
global.default.func]),data:global.default.array,startIndex:global.default.number,endIndex:global.default.number,tickFormatter:global.default.func,children:global.default.node,onChange:global.default.func,updateId:global.default.oneOfType([global.default.string,global.default.number]),leaveTimeOut:global.default.number},_class2.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1E3},_temp))||_class;exports.default=require}
//# sourceMappingURL=module$node_modules$recharts$lib$cartesian$Brush.js.map
